<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:f="http://java.sun.com/jsf/core"
      xmlns:ui="http://java.sun.com/jsf/facelets"
      xmlns:p="http://primefaces.org/ui">

    <f:view contentType="text/html">
        <h:head>

            <script type="text/javascript" src="../jquery.js"></script> 

            <script type="text/javascript" > 
                <!--
          
                var chart1; 
            
                jQuery(document).ready(function() {
                    var myObject;
                    var myObject2;
                    $.getJSON('http://localhost:8080/ServletJson', function(json) {
                    
                        myObject = $.parseJSON(JSON.stringify(json));
                    
                        var options = {
                            chart: {
                                renderTo: 'graphDiv',
                                defaultSeriesType: 'bar'
                            },
                            title: {
                                text: 'Consumo de Frutas'
                            },
                            xAxis: {
                                categories: ["Tiago", "Rond","Weder"]
                            },
                            yAxis: {
                                title: {
                                    text: 'Frutas consumidas'
                                }
                            },
                            series: [],
                            plotOptions: {
                                series: { 
                                    groupPadding: 0.3
                                }
                            }
                       
                        }   
                    
                        for(var i=0; i< json.length;i++){  
                            options.series.push({ 
                                "name": json[i].fruta,
                                "data": [json[i].qtd]
                
                            })}
                
                        chart1 = new Highcharts.Chart(options);  
             
                    });  
                });
            
                //--> 
            </script> 
            <script type="text/javascript" > 
                <!--
          
                var chart2; 
            
                jQuery(document).ready(function() {
                    var myObject;
                    var myObject2;
                    $.getJSON('http://localhost:8080/PrimeHighCharts/PontosHC', function(json) {
                    
                        myObject = $.parseJSON(JSON.stringify(json));
                        var opt = {
                            chart: {
                                renderTo: 'container'
                            },
                            title: {
                                text: 'População acima de 65 anos ou mais (%)'
                            },
                            credits: {
                                position: {
                                    align: 'left',
                                    x: 20
                                },
                                text: 'Data from The World Bank'
                            },
                            yAxis: {
                                title: {
                                    text: 'Percentage %'
                                }
                            },
                            xAxis: {
                                categories: ['1980', '1981','1982','1983','1984','1985','1986','1988','1989'],
                                labels: {
                                    step: 2
                                }
                            },
                            series: []
                        };
                    
                      
                        for(var i=0; i< json.length;i++){  
                            opt.series.push({ 
                                "name": json[i].pais,
                                "data": json[i].valores
                
                            })}
                        chart = new Highcharts.Chart(opt);  
             
                    });  
                });
            
                //--> 
            </script> 
            <f:facet name="first">
                <meta content='text/html; charset=UTF-8' http-equiv="Content-Type"/>
                <title>PrimeFaces</title>

            </f:facet>
        </h:head>

        <h:body>

            <p:layout fullPage="true">

                <p:layoutUnit position="north" size="100" resizable="true" closable="true" collapsible="true">
                    Header
                </p:layoutUnit>

                <p:layoutUnit position="south" size="50"  closable="true" collapsible="true">
                    Footer
                </p:layoutUnit>

                <p:layoutUnit position="west" size="175" header="Left" collapsible="true">
                    <p:menu>
                        <p:submenu label="Resources">
                            <p:menuitem value="Demo" url="http://localhost:8080/PrimeHighCharts/faces/welcomePrimefaces.xhtml" />
                            <p:menuitem value="Documentation" url="http://localhost:8080/PrimeHighCharts/faces/welcomePrimefaces.xhtml"/>
                            <p:menuitem value="Forum" url="http://localhost:8080/PrimeHighCharts/faces/welcomePrimefaces.xhtml" />
                            <p:menuitem value="Themes" url="http://localhost:8080/PrimeHighCharts/faces/welcomePrimefaces.xhtml" />

                        </p:submenu>

                    </p:menu>
                </p:layoutUnit>

                <p:layoutUnit position="center">

                    <script type="text/javascript" src="../js/highcharts.js"></script>
                    <script type="text/javascript" src="../js/modules/exporting.js"></script>   
                    <h:panelGrid border="1" style="width: 100%"> <div  id="graphDiv"  ></div> </h:panelGrid>
                    <h:panelGrid border="1" style="width: 100%"> <div id="container"  ></div>  </h:panelGrid>         
                               
                </p:layoutUnit>

            </p:layout>

        </h:body>

    </f:view>
</html>

